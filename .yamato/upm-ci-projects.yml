editors:
  - version: trunk
projects:
  - name: Universal
    folder: UniversalGraphicsTest
  - name: ShaderGraph
    folder: ShaderGraph
  - name: PostProcessing
    folder: PostProcessing
  - name: HDRP
    folder: HDRP_Tests
  - name: VFXMain
    folder: VisualEffectGraph
  - name: VFX_LWRP
    folder: VisualEffectGraph_LWRP
---
#turning off mac on this one for now so that all the macs don't start at once
all_project_ci:
  name: Run all test projects on all platforms
  agent:
    name: whatever
    type: Unity::VM
    image: cds-ops/ubuntu-18.04-agent:latest
    flavor: b1.small
  commands:
  - dir
  dependencies:
  {% for project in projects %}
    - .yamato/upm-ci-{{ project.name | downcase }}.yml#All_{{ project.name }}
  {% endfor %}
    - .yamato/upm-ci-katana.yml#run_katana_metal
  triggers:
    recurring:
      - branch: master
        frequency: daily
  artifacts:
    logs:
      paths:
        - "**/test-results/**"
